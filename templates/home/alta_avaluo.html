{% extends "home/base.html" %}

{% load listutil %}

{% load crispy_forms_tags %}

{% block alta %}active{% endblock %}
{% block inicio %}active{% endblock %}

{% block style %}
<style type="text/css" title="currentStyle">
@import "{{ STATIC_URL }}CSS/smoothness/jquery-ui-1.8.24.custom.css";
</style>

<style>
div.ui-datepicker{
  font-size:10px;
}
</style>
{% endblock %}

{% block script %}
<script type="text/javascript" language="javascript" src="{{ STATIC_URL }}JS/jquery-ui-1.8.24.custom.min.js"></script>
<script type="text/javascript" language="javascript" src="{{ STATIC_URL }}JS/jquery-datepicker-es.js"></script>
<script type="text/javascript" language="javascript" src="{{ STATIC_URL }}JS/ajax_estados_municipios.js"></script>
<script type="text/javascript" src="{{ STATIC_URL }}JS/jquery.formset.js"></script>
<!-- Incluye  sugerencia de colonias.-->
<script type="text/javascript"> 

$(document).ready( function() {
  var now = new Date();
  var month = (now.getMonth() + 1);               
  var day = now.getDate();
  if(month < 10) 
    month = "0" + month;
  if(day < 10) 
    day = "0" + day;
  var today = day + '/' + month + '/' + now.getFullYear() ;
  $('#id_Solicitud').val(today);
});

$(function() {

 $('#id_Solicitud').datepicker({ autoSize: true });
 $('#id_formset_sencilla-Solicitud').datepicker({ autoSize: true });

 $(":input").blur(function() {
   if(this.id != 'id_Observaciones') {
     this.value = this.value.toUpperCase();
   }
 });

 $('#id_NumInt').attr('disabled', 'disabled');
 $('input').blur(function () {
   if ($('#id_NumExt').val()) {
     $('#id_NumInt').removeAttr('disabled');
   } else {
     $('#id_NumInt').attr('disabled', 'disabled');
   }
 });

});
</script>
<script type="text/javascript">
    $(function() {
        $('#id_contact_info_table tbody tr').formset({
            extraClasses: ['row1', 'row2', 'row3', 'row4']
        })
    })
</script>
<!-- Here's an example of how you can style add/delete buttons with CSS -->
<style type="text/css">
    .add-row {
        padding-left:18px;
        background:url({{ STATIC_URL }}images/add.png) no-repeat left center;
    }
    .delete-row {
        float:right;
        display:block;
        margin:5px 0 0 5px;
        text-indent:-6000px;
        background:url({{ STATIC_URL }}images/delete.png) no-repeat left center;
        width:16px;
        height:16px;
    }
    tr.row1 td { background-color: #eee; }
    tr.row2 td { background-color: #eee; }
    tr.row3 td { background-color: #eee; }
    tr.row4 td { background-color: #eee; }
</style>
{% endblock %}      

{% block content %}
<ul id="tabs" class="nav nav-tabs" data-tabs="tabs">
  <li class="active">
    <a href="#individual" data-toggle="tab">Individual</a>
  </li>
  <li>
    <a href="#paquete" data-toggle="tab">Paquete</a>
  </li>
</ul>
<br>
<div id="my-tab-content" class="tab-content">
  <div class="tab-pane active" id="individual">
    <h1>Alta Aval√∫o</h1>
    <br />
    {% if forma.errors %}
    <p style="color: red;">Porfavor completa los campos faltantes.</p>
    {% endif %}
{% crispy forma %}
    <br></div>
  <div class="tab-pane" id="paquete">
    <h1>Paquete</h1>
    {% if formset.errors %}
    <p style="color: red;">Porfavor completa los campos faltantes en formset.</p>
    {% endif %}
    {% if formset.errors %}
    <div class="non-field-errors">
      {% for err in formset.errors %}
      <p class="form-error">Soy yo {{ err }}</p>
      {% endfor %}
    </div>
    {% endif %}
    {% if formset_sencilla.errors %}
    <p style="color: red;">Porfavor completa los campos faltantes en formset_sencilla.</p>
    {% endif %}
    <div id="content">
      <div class="entry">
        <form method="post" action="/SIAV/alta_avaluo_paquete/">
          {% csrf_token %}
          <table>
            <tr>
              <th>{{formset_sencilla.Tipo.label_tag}}</th>
              <th>{{formset_sencilla.Colonia.label_tag}}</th>
              <th>{{formset_sencilla.Estado.label_tag}}</th>
              <th>{{formset_sencilla.Municipio.label_tag}}</th>
            </tr>
            <tr>
              <td>{{formset_sencilla.Tipo}} {{formset_sencilla.Tipo.errors}}</td>
              <td>
                {{formset_sencilla.Colonia}} {{formset_sencilla.Colonia.errors}}
              </td>
              <td>
                {{formset_sencilla.Estado}} {{formset_sencilla.Estado.errors}}
              </td>
              <td>
                {{formset_sencilla.Municipio}} {{formset_sencilla.Municipio.errors}}
              </td>
            </tr>
            <tr>
              <th>{{formset_sencilla.Servicio.label_tag}}</th>
              <th>{{formset_sencilla.Estatus.label_tag}}</th>
              <th>{{formset_sencilla.Prioridad.label_tag}}</th>
            </tr>
            <tr>
              <td>
                {{formset_sencilla.Servicio}} {{formset_sencilla.Servicio.errors}}
              </td>
              <td>
                {{formset_sencilla.Estatus}} {{formset_sencilla.Estatus.errors}}
              </td>
              <td>
                {{formset_sencilla.Prioridad}} {{formset_sencilla.Prioridad.errors}}
              </td>
            </tr>
            <tr>
              <th>{{formset_sencilla.Cliente.label_tag}}</th>
              <th>{{formset_sencilla.Depto.label_tag}}</th>
              <th>{{formset_sencilla.Valuador.label_tag}}</th>
            </tr>
            <tr>
              <td>
                {{formset_sencilla.Cliente}} {{formset_sencilla.Cliente.errors}}
              </td>
              <td>{{formset_sencilla.Depto}} {{formset_sencilla.Depto.errors}}</td>
              <td>
                {{formset_sencilla.Valuador}} {{formset_sencilla.Valuador.errors}}
              </td>
            </tr>
            <tr>
              <th>{{formset_sencilla.Valor.label_tag}}</th>
              <th>{{formset_sencilla.Solicitud.label_tag}}</th>
            </tr>
            <tr>
              <td>{{formset_sencilla.Valor}} {{formset_sencilla.Valor.errors}}</td>
              <td>
                {{formset_sencilla.Solicitud}} {{formset_sencilla.Solicitud.errors}}
              </td>
            </tr>
          </table>

          <table id="id_contact_info_table" border="0" cellpadding="0" cellspacing="15" >
            <thead>
              <tr>
                <th style="text-align:left;padding:5px" scope="col">
                  <label>Referencia</label>
                </th>
                <th style="text-align:left;padding:5px" scope="col">Calle</th>
                <th style="text-align:left;padding:5px" scope="col">Num. Ext</th>
                <th style="text-align:left;padding:5px" scope="col">Num. Int</th>
                <!-- <th scope="col">Ciudad</th>
              -->
            </tr>
          </thead>
          <tbody>
            {{ formset.management_form }}
            {% for form in formset.forms %}
            <tr id="{{ form.prefix }}-row" style="padding:5px;">
              <td style="text-align:center;padding:10px">{{ form.Referencia }}</td>
              <td style="text-align:center;padding:10px">{{ form.Calle }}</td>
              <td style="text-align:center;padding:10px">{{ form.NumExt }}</td>
              <td style="text-align:center;padding:10px">{{ form.NumInt }}</td>
              <!-- <td>{{ form. }}</td>
            -->
          </tr>
          {% endfor %}
        </tbody>
      </table>
      <p>

        <input type="submit" value="Submit" />
      </p>
    </form>
  </div>
</div>
</div>
</div>
{% endblock %}